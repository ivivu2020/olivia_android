<ion-header>
  <div style="background-color: #ffffff" *ngIf="isheader">
    <ion-grid>
      <ion-row>
        <ion-col size="4" (click)="selectclickcin()">
          <ion-label style="font-weight: 300" stacked>Nhận phòng</ion-label>
          <ion-datetime  style="padding: 0px;color: #26bed6;font-weight: bold"
            displayFormat="DD-MM-YYYY" pickerFormat="DD MM YYYY" [(ngModel)]="cin"></ion-datetime>
        </ion-col>
        <ion-col size="4" (click)="selectclickout()">
          <ion-label style="font-weight: 300" stacked>Trả phòng</ion-label>
          <ion-datetime  style="padding: 0px;color: #26bed6;font-weight: bold"
            displayFormat="DD-MM-YYYY" pickerFormat="DD MM YYYY" [(ngModel)]="cout"></ion-datetime>
        </ion-col>
        <ion-col size="2" (click)="openmnu()">
          <ion-label style="font-weight: 300" stacked>Khách</ion-label>
          <ion-label style="margin:0px;color: #26bed6;font-weight: bold;margin-top: 8px;">{{guest}}</ion-label>
        </ion-col>
        <ion-col size="2" (click)="openmnu()">
          <ion-label style="font-weight: 300" stacked>Phòng</ion-label>
          <ion-label  style="margin:0px;color: #26bed6;font-weight: bold;margin-top: 8px;">{{room}}</ion-label>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
  <!-- <ion-toolbar *ngIf="showpopup==false" style="min-height: 0px">
    <ion-title style="text-align: center">Số lượng đặt phòng</ion-title>
    <ion-buttons start>
      <button ion-button style="width:48px" (click)="closeModal()">
        <span ion-text color="primary" showWhen="ios">Hủy</span>
        <ion-icon name="md-close" showWhen="android,windows"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar> -->
  <ion-toolbar *ngIf="showpopup==false">
      <ion-row>
          <ion-col size="10"><ion-title class="text-title-header">Số lượng đặt phòng</ion-title></ion-col>
          <ion-col size="2" style="text-align: right">
                <ion-note class="button-header" routerDirection="root" (click)="closeModal()">
                    <ion-icon name="close" style="font-size: 2em;"></ion-icon>
                </ion-note>
          </ion-col>
      </ion-row>
  </ion-toolbar>
</ion-header>
<div class="div-float-arrow" (click)="goback()">
  <!-- <ion-icon  style="font-size: 2em;color: #848484;" name="arrow-round-back" class="card-title">
  </ion-icon> -->
  <div class="div-go-back">
      <img style="height: 48px;padding: 8px;margin-left: -6px;" src="./assets/imgs/ios-arrow-round-back.svg" >
  </div>
</div>
<ion-content #scrollArea (ionScroll)="scrollFunction($event)" [scrollEvents]="true">

  <!-- <ion-infinite-scroll (ionInfinite)="scrollFunction($event)"> -->
      
  <div *ngIf="showpopup==true&&ischeck==true">
     
    <div class="card-background-page">
       
      <ion-slides (ionSlideDidChange)="test()" [options]="slideOpts" #mySlider>
          <!-- <div id="grad1" class="grad1">
            </div> -->
        <ion-slide *ngFor="let slide of slideData">
          <img style="height: auto;width: 100%" [src]="slide.LinkImage" />
          <div class="div-go-back" (click)="goback()">
              <!-- <ion-icon (click)="goback()" name="arrow-round-back" class="card-title">
              </ion-icon> -->
              <img style="margin-top: 6px;height: 36px;" src="./assets/imgs/ios-arrow-round-back-white.svg" >
           </div>
            <!-- <ion-badge class="badgescss">{{coutslide}}/{{lengthslide}}</ion-badge> -->
            <div class="badgescss">
              <span>{{coutslide}}/{{lengthslide}}</span>
            </div>
            <div class="img-heart" *ngIf="!itemlike"  (click)="likeItem()">
              <img style="padding-top:12px;width: 18px"  src="./assets/imgs/heart-empty.svg" >
            </div>
            <div class="img-heart" *ngIf="itemlike" (click)="unlikeItem()">
                <ion-icon style="padding-top:10px"  name="heart" color="danger"></ion-icon>
            </div>
            <div class="img-share" (click)="share()"><img style="padding-top:10px;width: 18px" src="./assets/imgs/ic_share.svg" ></div>
            
        </ion-slide>
        
      </ion-slides>
      
    </div>
    <div class="hoteldetail-point">
      <div>
        <h2 class="text-name" text-wrap>{{name}}
        </h2>
        
      </div>
      <div style="padding-bottom: 4px"><img src={{json}}></div>
      <div class="hotel-detail-note">
        <ion-row *ngIf="AvgPoint>=9 && AvgPoint<=10" style="border-bottom: solid 1px #ccc;border-top: solid 1px #ccc;padding: 12px 0px 10px 0px;">
          <ion-col style="padding:0px">
            <ion-badge class="cls-badge" ion-badge-border-radius>{{AvgPoint}}</ion-badge>
            <p style="padding-left: 40px;top: 2px;font-size: 14px;width: 150px;max-width: 150px;position: absolute;" class="label-badge">Tuyệt vời
            </p>
            <ion-note item-end style="margin-right: -15px;margin-top: 0;" (click)="btnseemore()">
              <button  ion-button icon-only clear style="color: #26bed6;font-size: 14px;float: right;padding-right: 24px;background: none;padding-top: 4px">
                {{numHotelReviews}} Nhận xét
                <ion-icon style="right: -4px;position: absolute;top: -1px;font-size: 24px;" name="ios-arrow-round-forward"></ion-icon>
              </button>
            </ion-note>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="AvgPoint>=7 && AvgPoint<9" style="border-bottom: solid 1px #ccc;border-top: solid 1px #ccc;padding: 12px 0px 10px 0px;">
          <ion-col style="padding:0px">
            <ion-badge class="cls-badge" ion-badge-border-radius>{{AvgPoint}}</ion-badge>
            <p style="padding-left: 40px;top: 2px;font-size: 14px;width: 150px;max-width: 150px;position: absolute;" class="label-badge">Rất tốt
            </p>
            <ion-note item-end style="margin-right: -15px;margin-top: 0;" (click)="btnseemore()">
              <button  ion-button icon-only clear style="color: #26bed6;font-size: 14px;float: right;padding-right: 24px;background: none;;padding-top: 4px">
                {{numHotelReviews}} Nhận xét
                <ion-icon style="right: -4px;position: absolute;top: -1px;font-size: 24px;" name="ios-arrow-round-forward"></ion-icon>
              </button>
            </ion-note>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="AvgPoint>=6 && AvgPoint<7" style="border-bottom: solid 1px #ccc;border-top: solid 1px #ccc;padding: 12px 0px 10px 0px;">
          <ion-col style="padding:0px">
            <ion-badge class="cls-badge" ion-badge-border-radius>{{AvgPoint}}</ion-badge>
            <p style="padding-left: 40px;top: 2px;font-size: 14px;width: 150px;max-width: 150px;position: absolute;" class="label-badge">Tốt
            </p>
            <ion-note item-end style="margin-right: -15px;margin-top: 0;" (click)="btnseemore()">
              <button  ion-button icon-only clear style="color: #26bed6;font-size: 14px;float: right;padding-right: 24px;background: none;;padding-top: 4px">
                {{numHotelReviews}} Nhận xét
                <ion-icon style="right: -4px;position: absolute;top: -1px;font-size: 24px;" name="ios-arrow-round-forward"></ion-icon>
              </button>
            </ion-note>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="AvgPoint<6" style="border-bottom: solid 1px #ccc;border-top: solid 1px #ccc;padding: 12px 0px 10px 0px;">
          <ion-col style="padding:0px">
            <ion-badge class="cls-badge" ion-badge-border-radius>{{AvgPoint}}</ion-badge>
            <p style="padding-left: 40px;top: 2px;font-size: 14px;width: 150px;max-width: 150px;position: absolute;" class="label-badge">Bình thường
            </p>
            <ion-note item-end style="margin-right: -15px;margin-top: 0;" (click)="btnseemore()">
              <button  ion-button icon-only clear style="color: #26bed6;font-size: 14px;float: right;padding-right: 24px;background: none;;padding-top: 4px">
                {{numHotelReviews}} Nhận xét
                <ion-icon style="right: -4px;position: absolute;top: -1px;font-size: 24px;" name="ios-arrow-round-forward"></ion-icon>
              </button>
            </ion-note>
          </ion-col>
        </ion-row>
        
      </div>
    </div>
    <hr style="margin-top: -16px">
  </div>
  <!-- <div *ngIf="showpopup==true&&ischeck==true" style="margin-left: 15px;margin-top: 4px" id="map_canvas">
  </div> -->
  <div *ngIf="showpopup==true && linkGoogleMap" #map id="map" style="height: 150px;" class="div-map">
    <iframe width="100%"
      height="150"
      frameborder="0"
      scrolling="no"
      marginheight="0"
      marginwidth="0"
      [src]="linkGoogleMap">
  </iframe>
  </div>
  <div *ngIf="showpopup==true&&ischeck==true">
    <div style="margin-left: 15px;margin-top: 10px">

      <img src="./assets/ic_facility/Group.svg">
      <label style="color: #4f4f4f;font-size: 14px;">
        {{Address}}
      </label>
    </div>
    <ion-row class="row-border-cin"></ion-row>
    <div style="margin-right: 16px;margin-left: 5px;margin-bottom: 10px;">
      <ion-grid style="margin-top: -12px;margin-left: 10px;padding:0">
        <ion-row style="font-size:12px">
          <ion-col size="4" style="padding:0" (click)="changeDate()">
            <ion-label style="font-weight: 300" stacked>Nhận phòng</ion-label>
          </ion-col>
          <ion-col size="3.5" style="padding:0" (click)="changeDate()">
            <ion-label style="font-weight: 300" stacked>Trả phòng</ion-label>
          </ion-col>
          <ion-col size="3" style="padding:0" (click)="openmnu()">
            <ion-label style="font-weight: 300;padding-left: 10px;" stacked>Số khách</ion-label>
          </ion-col>
          <ion-col size="1.5" style="padding:0" (click)="openmnu()">
            <ion-label style="font-weight: 300" stacked>Phòng</ion-label>
          </ion-col>
        </ion-row>
        <ion-row >
          <ion-col size="3.5"  style="padding:0" (click)="changeDate()">
            <ion-label 
              style="padding: 0px;color: #26bed6;font-weight: bold;font-size: 15px" stacked>{{cindisplay}}</ion-label>
          </ion-col>
          <ion-col size="0.5" style="padding: 0;">
            <ion-label style="margin-top: 32px;color: #666666;text-align: center">|</ion-label>
          </ion-col>
          <ion-col size="3.5"  style="padding:0" (click)="changeDate()">
            <ion-label
              style="padding: 0px;color: #26bed6;font-weight: bold;font-size: 15px" stacked>{{coutdisplay}}</ion-label>
          </ion-col>
          <ion-col size="0.5" style="padding: 0;margin-left: -3px;">
            <ion-label style="margin-top: 32px;color: #666666;text-align: center">|</ion-label>
          </ion-col>
          <ion-col size="2"  style="padding:0" (click)="openmnu()">
            <ion-label style="margin:1px;color: #26bed6;font-weight: bold;font-size: 15px;margin-top: 8px;">{{guest}}</ion-label>
          </ion-col>
          <ion-col size="0.5" style="padding: 0;">
            <ion-label style="margin-top: 32px;color: #666666;text-align: center">|</ion-label>
          </ion-col>
          <ion-col size="1"  style="padding:0" (click)="openmnu()">
            <ion-label style="margin:1px;color: #26bed6;font-weight: bold;font-size: 15px;margin-top: 8px;">{{room}}</ion-label>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
    <!-- Vùng hiển thị combo -->
      <div *ngIf="ischeckcombo" style="background-color: #003c71;color: #ffffff" class="div-combo">
        <div no-lines style="margin: 0">
          <ion-row >
            <ion-col size="2" style="padding:0">
                <img class="icon-combo" src="./assets/ic_hoteldetail/ic_combo.svg">
                
            </ion-col>
            <ion-col size="10" style="padding:0;margin-top: 8px;margin-left: -10px;">
                <ion-label class="text-hotel-label text-white-space">{{titlecombo}} | <span style="color:#ff9500">{{combopriceontitle}} VND/Khách</span></ion-label>
            </ion-col>
          </ion-row>
         <!-- <hr style="background-color: rgba(255, 255, 255, 0.3)"> -->
          <div no-lines style="padding:0 16px">
              <ion-row class="border-bottom"></ion-row>
            <div style="padding: 5px 0px 5px 0px">
              <label style="font-size: 14px;font-weight: bold;color: #ffffff">Combo bao gồm</label>
            </div>
            <div style="color: #ffffff;font-weight: 200;font-size: 14px;line-height: 20px;">
              <label style="font-size: 14px;" text-wrap [innerHTML]="Description">
              </label>
            </div>
            <!-- <hr style="background-color: rgba(255, 255, 255, 0.3)"> -->
            <ion-row class="border-bottom"></ion-row>
            <div *ngIf="notecombo" style="padding: 5px 0px 5px 0px">
              <label style="font-size: 14px;font-weight: bold;color: #ffffff">Điều kiện áp dụng</label>
            </div>
            <div *ngIf="notecombo" style="color: #ffffff">
              <label style="font-size: 14px;font-weight: 200;margin: 2px 0; " text-wrap [innerHTML]="notecombo">
              </label>
            </div>
            <div *ngIf="comboDetailList.length >0" class="div-combo-list">
              <ion-row class="border-bottom"></ion-row>
              <div *ngFor="let combolist of comboDetailList" style="padding-bottom:16px;">
                <ion-row><ion-label class="text-combo-city">Khởi hành từ <span >{{combolist.departureName}}</span></ion-label></ion-row>
                <div>
                  <ion-row *ngFor="let day of combolist.details">
                    <ion-col size="7" style="padding-left: 0;font-size: 14px;font-weight: 200">{{ day.stayFromStr }} → {{ day.stayToStr }}</ion-col>
                    <ion-col size="5" style="padding-right: 0;" class="text-right" [ngClass]="combolist.detailMinPrice == day.id ? 'text-combo-min-price': 'text-combo-price'">{{ day.totalPriceSale.toString().replace(',','.') | number:"1.0"}}đ</ion-col>
                  </ion-row>
                </div>
                <div *ngIf="combolist.salePriceUserFlight">
                    <ion-row *ngFor="let salePriceFlight of combolist.salePriceUserFlight" class="sale-price-flight">
                        <ion-col size="1" style="padding-left: 0;">
                            <ion-icon class="icon-flash" name="flash"></ion-icon>
                        </ion-col>
                        <ion-col class="text-flash" style="padding-right: 0;padding-left: 0;">
                          <label>{{salePriceFlight}}</label>
                        </ion-col>
                      </ion-row>
                </div>
                
                <ion-row *ngIf="combolist.hasCalendar">
                  <ion-col class="text-departure" style="padding-right: 0;padding-left: 0;font-size: 14px"><a (click)="showDepartureCalendar(combolist)">Xem lịch khởi hành</a></ion-col>
                </ion-row>
              </div>
            </div>
            <!-- <ion-row *ngIf="sendRequest" style="padding: 8px 16px 16px 16px;">
                <button ion-button round outline class="button btn-book" (click)="requestCombo(1)">Gửi yêu cầu</button>
            </ion-row> -->
            <div>
              <ion-row *ngIf="loginuser && loadpricecombodone && comboDetailList.length ==0 && !warningMaxPax && !flashSaleEndDate">
                <ion-col size="6" class="text-pax"><span>{{adults}} người lớn | {{child}} trẻ em</span></ion-col>
                <ion-col size="6" class="text-right text-combo-room-price">{{comboprice}}<span class="text-d">đ</span></ion-col>
              </ion-row>
              <ion-row *ngIf="loginuser && comboDetailList.length ==0 && warningMaxPax">
                  <ion-col style="    padding: 0 16px;color: #ff9500;"><span>{{warningMaxPax}}</span></ion-col>
                </ion-row>
                <!-- Text warning khi quá hạn flashsale -->
                <ion-row *ngIf="loginuser && fs && flashSaleEndDate" style="padding:0px 11px">
                  <ion-col><label class="flashsale-enddate-warning">Combo chỉ áp dụng đến ngày {{flashSaleEndDate}}</label></ion-col>
                </ion-row>
              <!-- Combo flashsale -->
              <ion-row *ngIf="fs && flashSaleEndDate" style="padding: 8px 0px 16px 0px;">
                  <button ion-button round outline class="button btn-book" (click)="changeDate()">Đổi ngày đi</button>
                </ion-row>
              <ion-row *ngIf="fs && !flashSaleEndDate && loadcomplete" style="padding: 8px 0px 16px 0px;">
                <button ion-button round outline class="button btn-book" (click)="requestCombo(2)">Gửi yêu cầu</button>
              </ion-row>
               <!-- combo vmb -->
              <ion-row *ngIf="fc && (dateofcombo != duration+1) && loadcomplete" style="padding: 8px 0px 16px 0px;">
                  <button ion-button round outline class="button btn-book" (click)="sendRequestCombo()">Gửi yêu cầu</button>
              </ion-row>
              <ion-row *ngIf="fc && (dateofcombo == duration+1) && loadcomplete" style="padding: 8px 0px 16px 0px;">
                <button ion-button round outline class="button btn-book" (click)="requestCombo(1)">Đặt Combo</button>
            </ion-row>
            </div>
            <!-- Combo khác -->
            <ion-row *ngIf="nm && loadcomplete" style="padding: 8px 0px 16px 0px;">
                <button ion-button round outline class="button btn-book" (click)="requestCombo(3)">Gửi yêu cầu</button>
            </ion-row>
            <!-- <ion-row *ngIf="ischeckcombo && !hasComboRoom && changedate" style="padding: 8px 16px 16px 16px;">
                <button ion-button round outline class="button btn-book" (click)="checkComboPrice()">Xem giá combo</button>
            </ion-row> -->
          </div>
        </div>
      </div>
      <!-- End Vùng hiển thị combo -->

      <!-- Vùng hiển thị detail room -->
      <div *ngIf="hotelRoomClasses.length >0 && loadcomplete">
          <div class="hotel-detail-content" >
              <div class="hotel-detail-room-class">
              <div>
                  <div class="card-background-detailpage">
                  <ion-item-group *ngFor="let hotelroom of hotelRoomClasses; let itemindex = index" [myScrollVanish]="scrollArea">
                        <ion-row class="item-room-first-child" style="padding:3px;">
                        <ion-col size="4">
                          <div class="div-wrapimg">
                              <img *ngIf="hotelroom.Rooms[0].Images.indexOf('noimage') != -1 || hotelroom.Rooms[0].Images.indexOf('http') != -1"  src="{{hotelroom.Rooms[0].Images}}"  >
                              <img *ngIf="hotelroom.Rooms[0].Images.indexOf('noimage') == -1 && hotelroom.Rooms[0].Images.indexOf('http') == -1"  src="https:{{hotelroom.Rooms[0].Images}}">
                          </div>
                        </ion-col>
                        <ion-col size="8" class="item-room-description-hoteldetail" style="padding:3px">
                      <div class="text-left" [ngClass]="hotelroom.ClassName.length > 27 ? 'lh-12' : '' ">
                          <h2 class="room-class-name">{{hotelroom.ClassName}}</h2>
                          <ion-row>
                            <ion-col size="1" class="no-padding room-class-icon">
                              <img class="icon-detail-fix" src="./assets/iocnsearch/ic_people.svg">
                            </ion-col>
                            <ion-col class="p-left-4">
                              <span *ngIf="hotelroom.Rooms[0].MaxAdults != hotelroom.Rooms[0].IncludeAdults && hotelroom.Rooms[0].MaxChils >0" class="text-room-class-description">{{hotelroom.Rooms[0].MaxAdults}} người lớn | {{hotelroom.Rooms[0].IncludeAdults}} người lớn & {{hotelroom.Rooms[0].MaxChils}} trẻ em</span>
                              <span *ngIf="hotelroom.Rooms[0].MaxAdults == hotelroom.Rooms[0].IncludeAdults && hotelroom.Rooms[0].MaxPax >= hotelroom.Rooms[0].MaxAdults && hotelroom.Rooms[0].MaxChils >0" class="text-room-class-description">{{hotelroom.Rooms[0].MaxAdults}} người lớn & {{hotelroom.Rooms[0].MaxPax - hotelroom.Rooms[0].MaxAdults}} trẻ em</span>
                              <span *ngIf="hotelroom.Rooms[0].MaxAdults == hotelroom.Rooms[0].IncludeAdults && (hotelroom.Rooms[0].MaxPax < hotelroom.Rooms[0].MaxAdults || hotelroom.Rooms[0].MaxChils ==0)" class="text-room-class-description">Phòng tối đa {{hotelroom.Rooms[0].MaxPax}} khách</span>
                            </ion-col>
                          </ion-row>
                          <ion-row *ngIf="hotelroom.Rooms[0].RoomInfomations && hotelroom.Rooms[0].RoomInfomations.BedSummaryDisplaysMobile && hotelroom.Rooms[0].RoomInfomations.BedSummaryDisplaysMobile.length >0">
                              <ion-col size="1" class="no-padding room-class-icon">
                                <img class="icon-detail-fix" src="./assets/ic_hoteldetail/ic_bed.svg">
                              </ion-col>
                              <ion-col class="p-left-4 col-width-90-percent">
                                <div *ngFor="let bed of hotelroom.Rooms[0].RoomInfomations.BedSummaryDisplaysMobile" class="text-room-class-description" [ngClass]="bed.length > 40 ? 'hidden-text': ''">{{bed}}</div>
                              </ion-col>
                            </ion-row>
                            <ion-row>
                              <span class="text-see-detail" (click)="showRoomDetail(hotelroom)">Xem chi tiết</span>
                            </ion-row>
                        </div>
                      </ion-col>
                    </ion-row>
                    <!-- Vùng hiển thị facility, mealtype, penalty -->
                    <div class="mealtype-item">
                          <div class="p-left-8 div-mealtype" *ngFor="let mealtype of hotelroom.MealTypeRates; let j = index">
                              <ion-row style="width:100%">
                                  <img class="icon-detail-green-fix" src="./assets/ic_hoteldetail/ic_food_green.svg">
                                  <ion-label *ngIf="mealtype.Name != null && mealtype.Notes.length==0" class="text-hotel-description cls-green">{{mealtype.Name}}</ion-label>
                                  <ion-label *ngIf="mealtype.Name != null && mealtype.Notes.length!=0 && mealtype.Notes[0].length == mealtype.Name.length" class="text-hotel-description cls-green">{{mealtype.Notes.join(', ')}}</ion-label>
                                  <ion-label *ngIf="mealtype.Name != null && mealtype.Notes.length!=0 && mealtype.Notes[0].length != mealtype.Name.length" class="text-hotel-description cls-green">{{mealtype.Name}}, {{mealtype.Notes.join(', ')}}</ion-label>
                              </ion-row>
                              <ion-row style="width:100%" *ngFor="let fac of hotelroom.Rooms[0].RoomInfomations.Facilitys" >
                                <ion-row style="width:100%" *ngIf="mealtype.PromotionInclusions.length == 0" >
                                  <ion-icon  class="icon-detail-check-green-fix" name="checkmark-circle-outline"></ion-icon>
                                  <ion-label class="text-hotel-description cls-green">{{ fac.Name }}</ion-label>
                                </ion-row>
                              </ion-row>
                              <!-- Promotion include -->
                              <ion-row style="width:100%" *ngFor="let promo of mealtype.PromotionInclusions">
                                <ion-row style="width:100%" *ngIf="hotelroom.Rooms[0].RoomInfomations.Facilitys.length != 0 && hotelroom.Rooms[0].RoomInfomations.Facilitys != 0" >
                                  <ion-icon  class="icon-detail-check-green-fix" name="checkmark-circle-outline"></ion-icon>
                                  <ion-label class="text-hotel-description cls-green">{{promo}}</ion-label>
                                </ion-row>
                              </ion-row>
                              <ion-row style="width:100%">
                                <img class="icon-detail-green-fix" src="./assets/ic_hoteldetail/ic_fee_green.svg">
                                <ion-label class="text-hotel-description cls-green">Đã bao gồm thuế phí</ion-label>
                              </ion-row>
                              <ion-row class="penal-detail" *ngIf='mealtype.Penaltys[0] && !mealtype.Penaltys[0].IsPenaltyFree && hotelroom.Rooms[0].Penaltys[0]'>
                                  <img *ngIf="mealtype.Penaltys[0].PenaltyDescription.length <=70" class="icon-detail-check-green-fix" src="./assets/ic_hoteldetail/uc_nonrefund_green.svg">
                                  <img *ngIf="mealtype.Penaltys[0].PenaltyDescription.length > 70" class="icon-detail-check-green-fix" src="./assets/ic_hoteldetail/ic_info.svg">
                                    <span *ngIf="mealtype.Penaltys[0].PenaltyDescription.length <=70" class="penalty-text" [innerHTML]="mealtype.Penaltys[0].PenaltyDescription.replace('p>','ion-label>')"></span>
                                    <div style="margin-top: -4px;" (click)="penaltySelected(hotelRoomClasses.length*itemindex+j+1)">
                                        <button *ngIf="!mealtype.Penaltys[0].IsPenaltyFree && mealtype.Penaltys[0].PenaltyDescription.length > 70" class="penalty-text link-penalty" >Chính sách hủy phòng</button>
                                    </div>
                                    
                                    <div class="penalty-active arrow" [class.active]="penaltyItemSelected==hotelRoomClasses.length*itemindex+j+1" *ngIf="penaltyItemSelected==hotelRoomClasses.length*itemindex+j+1">
                                        <ion-label *ngFor="let pen of mealtype.Penaltys; let k = index" class="penalty-active-description" [innerHTML]="pen.PenaltyDescription.replace('p>','ion-label>')" [ngClass]="mealtype.Penaltys.length > 1 && k==mealtype.Penaltys.length-1 ? 'none-p-top' : ''"></ion-label>
                                    </div>
                              </ion-row>
                              <ion-row style="width:100%" class="penal-detail" *ngIf='mealtype.Penaltys[0] && mealtype.Penaltys[0].IsPenaltyFree && hotelroom.Rooms[0].Penaltys[0]'>
                                  <img class="icon-detail-check-green-fix" src="./assets/ic_hoteldetail/ic_info.svg">
                                  <div style="margin-top: -4px;" (click)="penaltySelected(hotelRoomClasses.length*itemindex+j+1)">
                                      <button class="penalty-text link-penalty" >Hủy miễn phí trước ngày {{mealtype.Penaltys[0].PenaltyShortDateStr}}</button>
                                  </div>
                                    <div class="penalty-active arrow" [class.active]="penaltyItemSelected==hotelRoomClasses.length*itemindex+j+1" *ngIf="penaltyItemSelected==hotelRoomClasses.length*itemindex+j+1">
                                        <ion-label *ngFor="let pen of mealtype.Penaltys; let k = index" class="penalty-active-description" [innerHTML]="pen.PenaltyDescription.replace('p>','ion-label>')" [ngClass]="mealtype.Penaltys.length > 1 && k==mealtype.Penaltys.length-1 ? 'none-p-top' : ''"></ion-label>
                                    </div>
                              </ion-row>
                              <!-- <ion-row *ngIf="hotelroom.Rooms[0].Infomation">
                                  <img class="icon-detail-check-green-fix" src="./assets/ic_hoteldetail/ic_info.svg">
                                  <button class="penalty-text link-penalty text-decoration" (click)="showRoomInfo()">Xem thêm thông tin phòng</button>
                                  <p class="penalty-active-description cls-moreinfo" [innerHTML]="hotelroom.Rooms[0].Infomation" *ngIf="showroominfo"></p>
                              </ion-row> -->
                              
                              <ion-row *ngIf="hotelRooms.SummaryFilter && loginuser && !hotelroom.MSG" class="text-room-description">
                                <ion-col style="text-align: right;padding:0">
                                    <ion-label style="margin:0px">{{hotelRooms.SummaryFilter}}</ion-label>
                                </ion-col>
                                  
                              </ion-row>
                              <ion-row *ngIf="hotelroom.MSG" class="text-room-description">
                                <ion-col style="text-align: right;padding:0">
                                  <ion-label style="margin:0px">Giá cơ bản dành cho {{hotelroom.Rooms[0].IncludeAdults}} người lớn</ion-label>
                                </ion-col>
                            </ion-row>
                              <ion-row *ngIf="loginuser && mealtype.PromotionNote" class="text-promotion-note">
                                  <div class="div-promotion-note">
                                      <span class="icon-text-promotion">
                                          <img style="width:14px" src="./assets/imgs/gift2.svg">
                                      </span>
                                      <span >{{mealtype.PromotionNote}}</span>
                                  </div>
                              </ion-row>
                              <ion-row *ngIf="loginuser && mealtype.PriceAvgPlusTA != mealtype.PriceAvgPlusOTA && mealtype.PriceAvgPlusOTA > mealtype.PriceAvgPlusTA" >
                                  <ion-col class="text-room-price-ota">
                                    <ion-label style="margin:0px;line-height: 24px;text-decoration: line-through;" >{{mealtype.PriceAvgPlusOTAStr}}đ</ion-label>
                                  </ion-col>
                              </ion-row>
                              <ion-row *ngIf="loginuser" >
                                <ion-col [ngClass]="(loginuser && mealtype.AvailableNo >0 && mealtype.Status=='AL')? 'text-room-price-no-bottom':'text-room-price' ">
                                    <ion-label style="margin:0px;line-height: 24px;" >{{mealtype.PriceAvgPlusTAStr}}đ</ion-label>
                                </ion-col>
                                  
                              </ion-row>
                              <ion-row *ngIf="loginuser && mealtype.AvailableNo >0 && mealtype.Status=='AL'" >
                                <ion-col style="text-align: right">
                                    <ion-label style="margin:0px;text-align: right;font-size: 14px;color: #26bed6;padding-bottom: 16px;padding-right: 8px;">(Còn {{mealtype.AvailableNo}} phòng)</ion-label>
                                </ion-col>
                                  
                              </ion-row>
                              <ion-row *ngIf="loginuser && hotelroom.MSG">
                                <ion-col style="text-align: right">
                                    <ion-label style="color:#F79321;white-space: normal;padding-bottom: 16px;padding-right: 8px">{{ hotelroom.MSG.toString().trim()}}</ion-label>
                                  </ion-col>
                              
                              </ion-row>
                              <ion-row *ngIf="!loginuser" class="text-register" (click)="goToLogin()">
                                  <div style="margin:0px;line-height: 24px;width:100%;border: none;">
                                    <span class="icon-text-register">
                                      <img src="./assets/imgs/ic_email.svg">
                                    </span>
                                    <span style="font-size:22px;font-weight: bold">Đăng nhập</span> để xem giá phòng</div>
                              </ion-row>
                               
                              <ion-row *ngIf="loginuser && !hotelroom.MSGCode.toString()" style="padding-bottom: 16px;padding-right: 8px;">
                                  <button (click)="book(hotelroom.Rooms[0].RoomID,mealtype,j,hotelroom.ClassName,itemindex)" ion-button round outline class="button btn-book">Đặt ngay</button>
                              </ion-row>
                              <!-- <ion-row *ngIf="loginuser && hotelroom.MSGCode.toString()" style="padding-bottom: 16px;padding-right: 8px;">
                                  <button *ngIf="hotelroom.TotalRoom ==1" (click)="book(hotelroom.Rooms[0].RoomID,mealtype,j,hotelroom.ClassName,itemindex)" ion-button round outline class="button btn-book">Đặt ngay</button>
                                  <button *ngIf="hotelroom.TotalRoom >1" (click)="book(hotelroom.Rooms[0].RoomID,mealtype,j,hotelroom.ClassName,itemindex)" ion-button round outline class="button btn-book">Đặt ngay ({{ hotelroom.TotalRoom}} phòng)</button>
                              </ion-row> -->
                              <div class="div-border-bottom"></div>
                              <!-- <ion-row *ngIf="!loginuser || mealtype.Status !='AL'" style="padding-bottom: 16px;padding-right: 8px;">
                                  <button ion-button round outline class="button btn-book">Gửi yêu cầu</button>
                              </ion-row> -->
                            </div>
                          </div>
                          <!-- End Vùng hiển thị facility, mealtype, penalty -->
                        <div class="div-split"></div>
                      </ion-item-group>
                    </div>
                    
              </div>
            </div>
            </div>
      </div>
      <div *ngIf="!loadcomplete && hotelRoomClasses && hotelRoomClasses.length == 0" class="div-pending-load-data">
        <img src="./assets/placeholder/group_review.svg">
      </div>
      <div *ngIf="loadcomplete && hotelRoomClasses && hotelRoomClasses.length == 0" class="div-empty-room">
          <ion-row>
            <ion-col><div class="empty-room"><img src="./assets/empty/ic_outofroom.png"></div></ion-col>
          </ion-row>
          <ion-row><label class="label-empty-room">Xin lỗi, không còn phòng trống trong khoảng thời gian này</label></ion-row>
          <ion-row>
            <ion-col class="btn-empty-left"><button ion-button round outline class="button btn-change-hotel" (click)="changeHotel()">Đổi khách sạn</button></ion-col>
            <ion-col class="btn-empty-right"><button ion-button round outline class="button btn-change-date" (click)="changeDate()">Đổi ngày</button></ion-col>
          </ion-row>
      </div>
      <!-- End Vùng Detail Room -->

    <div class="list-item-end">
      <div class="div-row-item-end" (click)="FacilitiesPage()">
        <label>
          Tiện ích
        </label>
        <ion-icon slot="end" name="ios-arrow-round-forward" class="item-end"></ion-icon>
      </div>
      <div class="div-row-item-end" (click)="DescriptionPage()">
        <label>
          Thông tin khách sạn
        </label>
        <ion-icon slot="end" name="ios-arrow-round-forward" class="item-end"></ion-icon>
      </div>
      <div class="div-row-item-end" (click)="PolicyPage()">
        <label>
          Chính sách khách sạn
        </label>
        <ion-icon slot="end" name="ios-arrow-round-forward" class="item-end"></ion-icon>
      </div>
    </div>
    
    <div *ngIf="numHotelReviews>0">
      <label style="font-weight: bold;margin-left: 15px;font-size: 18px;padding-bottom: 16px">
        Đánh giá của khách hàng
      </label>
      <div style="margin-left: 10px;font-size: 14px" *ngFor="let  msg of arrHotelReviews; let idx = index">
        <ion-row>
          <ion-col text-left>
            <label style="color: #666;font-weight:  500" *ngIf="msg.ReviewPoint>=9 && msg.ReviewPoint<=10">
              Tuyệt vời
            </label>
            <label style="color: #666;font-weight:  500" *ngIf="msg.ReviewPoint>=7 && msg.ReviewPoint<9">
              Rất tốt
            </label>
            <label style="color: #666;font-weight:  500" *ngIf="msg.ReviewPoint>=6 && msg.ReviewPoint<7">
              Tốt
            </label>
            <label style="color: #666;font-weight:  500" *ngIf="msg.ReviewPoint<6">
              Bình thường
            </label>
          </ion-col>
          <ion-col text-right>
            <label style="color:#26bed6;font-size: 18px;padding-right: 11px;">
              {{msg.ReviewPoint}}
            </label>
          </ion-col>
        </ion-row>
        
        <ion-row>
          <ion-col text-left>
            <label style="margin:0" text-wrap>
              {{msg.BestFeature}}
            </label>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col text-left>
            <label style="margin:0" style="color: #828282;font-size: 12px;padding-right: 16px" text-wrap>
              {{msg.CustomerName}} • {{msg.DateStayed}}
            </label>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="idx < arrHotelReviews.length-1" class="border-bottom-item-end"></ion-row>
      </div>
      <div *ngIf="numHotelReviews>3" align="center" class="div-seedetail">
        <button ion-button clear  class="text-seedetails" (click)="btnseemore()">Xem tất cả đánh giá</button>
      </div>
      <hr *ngIf="numHotelReviews>3" style="margin-top: 0px; margin-left: 16px;">
    </div>
    <div *ngIf="HotelRelated && HotelRelated.length >0" style="padding: 10px 16px 10px 16px;">
      <label style="font-weight: bold;font-size: 18px">
        Khách sạn tương tự
      </label>
    </div>
    <div style="margin-top: 5px">
      
      <div>
        <!-- <ion-grid class="card-background-page"> -->
          <div style="overflow: auto;height: auto;" class="card-background-page">
          <ion-item-group *ngFor="let msg of HotelRelated">
          <!-- <ion-item> -->
            <ion-row>
              <ion-col size="4" style="height:110px">
                    <div class="hotel-related-img">
                      <img (click)="itemHotelRelated(msg.Id)" class="img-radius" src={{msg.Avatar}} style="position:relative">
                        <div (click)="itemHotelRelated(msg.Id)" *ngIf="msg.PromotionDescriptionSubstring&&msg.SubLocation&& msg.Rating!=0" class="transbox_0">
                          {{msg.PromotionDescriptionSubstring}}
                        </div>
                    </div>
              </ion-col>
              <ion-col size="8" class="hotel-related-description">
                  <div  (click)="itemHotelRelated(msg.Id)">
                      <h2 style="margin:0;font-size: 14px;font-weight: bold;" >{{msg.Name}}
                      </h2>
                      <p>
                          <img *ngIf="msg.Rating!=0" src={{msg.Rating}}>
                      </p>
                      <p *ngIf="msg.SubLocation" class="text">
                        <!-- <ion-icon name="pin"></ion-icon> -->
                        <img style="height:10px" src="./assets/ic_hoteldetail/group.svg">
                        <label style="color: #4f4f4f;margin-left: 5px;font-size: 12px"> {{msg.SubLocation}}
                        </label>
                      </p>
                      <ion-row *ngIf="msg.AvgPoint>=9 && msg.AvgPoint<=10">
                        <ion-badge>{{msg.AvgPoint}}</ion-badge>
                        <label class="label-badge">Tuyệt vời
                        </label>
                      </ion-row>
                      <ion-row *ngIf="msg.AvgPoint>=7 && msg.AvgPoint<9">
                        <ion-badge>{{msg.AvgPoint}}</ion-badge>
                        <label class="label-badge">Rất tốt
                        </label>
                      </ion-row>
                      <ion-row *ngIf="msg.AvgPoint>=6 && msg.AvgPoint<7">
                        <ion-badge>{{msg.AvgPoint}}</ion-badge>
                        <label class="label-badge">Tốt
                        </label>
                      </ion-row>
                      <ion-row *ngIf="msg.AvgPoint<6">
                        <ion-badge>{{msg.AvgPoint}}</ion-badge>
                        <label class="label-badge">Bình thường
                        </label>
                      </ion-row>
                    </div>
                    <div *ngIf="loginuser" >
                        <div *ngIf="msg.DealType"  class="last-row" [ngClass]="!msg.SubLocation ? 'p-top-16' : ''">
                            <ion-row style="margin-left: -5px;font-weight: bold" (click)="itemHotelRelated(msg.Id)" >
                              <ion-col size="5" *ngIf="msg.DealPrice" class="text-combo"  text-left class="p-top-dealtype">
                                <img src="./assets/ic_combo.svg">
                                <label>{{msg.DealType}}</label>
                              </ion-col>
                              <ion-col size="5" *ngIf="!msg.DealPrice" class="text-combo"  text-left class="p-top-dealtype-6">
                                  <img src="./assets/ic_combo.svg">
                                  <label>{{msg.DealType}}</label>
                                </ion-col>
                              <ion-col size="7" *ngIf="msg.DealPrice" text-right class="p-top-8  price">
                                <label *ngIf="msg.DealPrice!=0" class="label-dealprice">{{msg.DealPrice}} đ</label>
                              </ion-col>
                            </ion-row>
                            
                          </div>
                          <div *ngIf="!msg.DealType" class="last-row" [ngClass]="!msg.SubLocation ? 'p-top-16' : ''">
                            <!-- Hiển thị thêm giá TA nếu giá TA <> OTA -->
                            <div text-right *ngIf="msg.MinPriceTAStr && msg.MinPriceOTAStr!=msg.MinPriceTAStr && msg.MinPriceTAStr!=0 && msg.MinPriceOTAStr<msg.MinPriceTAStr && loginuser" class="label-minpriceTA">{{msg.MinPriceTAStr}} đ</div>
                            <!-- Hiển thị giá OTA -->
                            <ion-row style="margin-left: -6px" (click)="itemHotelRelated(msg.Id)" >
                              <ion-col size="5" class="text-nameroom" text-left [ngClass]="msg.RoomNameSubString && msg.RoomNameSubString.length < 40 ? 'p-top-minprice' : 'p-minprice'">
                                <label >{{msg.RoomNameSubString}}</label>
                              </ion-col>
                              <ion-col size="7" text-right [ngClass]="msg.RoomNameSubString && msg.RoomNameSubString.length < 40 ? 'p-top-8 price' : 'p-notop price'">
                                <div>
                                    <label *ngIf="msg.MinPriceOTAStr" class="label-minprice">{{msg.MinPriceOTAStr}} đ</label>
                                    <label *ngIf="!msg.MinPriceOTAStr" class="label-minprice">Hết phòng</label>
                                </div>
                              </ion-col>
                            </ion-row>
                          </div>
                        </div>
                          <div *ngIf="!loginuser" class="last-row" [ngClass]="!msg.SubLocation ? 'p-top-16' : ''" (click)="itemHotelRelated(msg.Id)" >
                              <ion-row *ngIf="msg.DealType">
                                  <ion-row>
                                      <ion-col class="p-top-8">
                                          <span class="label-price-login t-bold">Giá ưu đãi!</span><span class="label-price-login text-login" (click)="goToLogin()"> Đăng nhập để xem</span>
                                      </ion-col>
                                    </ion-row>
                              </ion-row>
                            <ion-row *ngIf="!msg.DealType">
                              <ion-col class="p-top-8">
                                  <span class="label-price-login t-bold">Giá ưu đãi!</span><span class="label-price-login text-login" (click)="goToLogin()"> Đăng nhập để xem</span>
                              </ion-col>
                            </ion-row>
                            
                          </div>
              </ion-col>
            </ion-row>
           
            <p class="h-line"></p>
            <!-- </ion-item> -->
          </ion-item-group>
          </div>
          <!-- </ion-grid> -->
      </div>
    </div>
    
    
  </div>
  <div *ngIf="showpopup==false">
    <div style="margin-left: -15px">
      <ion-list>
        <ion-item>
          <ion-row style="width: 100%">
            <ion-col size="8" text-left>
              <p style="color: #26bed6;padding: 5px">
                <label style="font-weight: bold;padding-left: 4px;">{{adults1}}</label>
                <label style="color: #000000;padding-left: 4px;">người lớn</label>
                <p>
            </ion-col>
            <ion-col size="2" text-center>
              <div align="left">
                <img *ngIf="ischeckadults==true" (click)="minusadults()" src="./assets/ic_facility/ic_minus.png">
                <img *ngIf="ischeckadults==false" (click)="minusadults()"
                  src="./assets/ic_facility/ic_minus_disable.png">
              </div>
            </ion-col>
            <ion-col size="2" text-right>
              <img (click)="plusadults()" src="./assets/ic_facility/ic_add.png">
            </ion-col>
          </ion-row>
        </ion-item>
        <ion-item>
          <ion-row style="width:100%">
            <ion-col size="8" text-left>
              <p style="color: #26bed6;padding: 5px 5px">
                <label style="font-weight: bold;padding-left: 4px;">{{child1}}</label>
                <label style="color: #000000;padding-left: 4px;">trẻ em</label>
                <p>
            </ion-col>
            <ion-col size="2" text-center>
              <div align="left">
                <img *ngIf="ischeckchild==true" (click)="minuschild()" src="./assets/ic_facility/ic_minus.png">
                <img *ngIf="ischeckchild==false" (click)="minuschild()" src="./assets/ic_facility/ic_minus_disable.png">
              </div>
            </ion-col>
            <ion-col size="2" text-right>
              <img (click)="pluschild()" src="./assets/ic_facility/ic_add.png">
            </ion-col>
          </ion-row>
        </ion-item>
        <ion-item>
          <ion-row style="width:100%">
            <ion-col size="8" text-left>
              <p style="color: #26bed6;padding: 5px 5px">
                <label style="font-weight: bold;padding-left: 4px;">{{room1}}</label>
                <label style="color: #000000;padding-left: 4px;">phòng</label>
                <p>
            </ion-col>
            <ion-col size="2" text-center>
              <div align="left">
                <img *ngIf="ischeckroom==true" (click)="minusroom()" src="./assets/ic_facility/ic_minus.png">
                <img *ngIf="ischeckroom==false" (click)="minusroom()" src="./assets/ic_facility/ic_minus_disable.png">
              </div>
            </ion-col>
            <ion-col size="2" text-right>
              <img (click)="plusroom()" src="./assets/ic_facility/ic_add.png">
            </ion-col>
          </ion-row>
        </ion-item>
      </ion-list>
    </div>
    <div style="margin-left: 16px">
      <label style="font-size: 14px;font-weight: bold">
        Tuổi trẻ em
      </label>
      <ion-list *ngFor="let msg of arrchild2">
        <ion-item style="margin-left: -15px">
          <ion-label>{{msg.text}}</ion-label>
          <ion-select style="color: #26bed6" [(ngModel)]="msg.numage" interface="action-sheet">
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="<1"><1</ion-select-option> 
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="1">1</ion-select-option>
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="2">2</ion-select-option>
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="3">3</ion-select-option>
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="4">4</ion-select-option>
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="5">5</ion-select-option>
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="6">6</ion-select-option>
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="7">7</ion-select-option>
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="8">8</ion-select-option>
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="9">9</ion-select-option>
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="10">10</ion-select-option>
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="11">11</ion-select-option>
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="12">12</ion-select-option>
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="13">13</ion-select-option>
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="14">14</ion-select-option>
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="15">15</ion-select-option>
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="16">16</ion-select-option>
            <ion-select-option (ionSelect)="selectclick($event,msg.text)" value="17">17</ion-select-option>
          </ion-select>
        </ion-item>
      </ion-list>
    </div>
  </div>

  <div padding="" *ngIf="ischeck==false">
    <img src="./assets/placeholder/group_hoteldetail.svg">
  </div>
</ion-content>
<ion-footer>
  <div *ngIf="isShown&&showpopup==true" style="background-color: #ffffff; text-align: center">
    <button (click)="scrollToTop()" ion-button round outline class="button button2">Book a room</button>
  </div>
  <div *ngIf="showpopup==false" style="background-color: #ffffff; text-align: center">
    <button (click)="done()" ion-button round outline class="button button2">Hoàn thành</button>
  </div>
</ion-footer>